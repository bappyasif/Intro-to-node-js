<!DOCTYPE html>
<html lang="en">
    <%- include("./partials/head.ejs") %>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-2">
                <%- include("./partials/nav.ejs") %>
            </div>
            <div class="col">
                <h1>Title: <%= author.name %></h1>
                <p><%= author.lifespan %></p>

                <% if(author_books) { %>
                    <p><strong>Delete the following books before attempting to delete this author: </strong></p>
                    <div style='margin-left:20px;margin-top:20px;'>
                        <h4>Books</h4>
                        <dl>
                            <% author_books.forEach(book => { %>
                                <dt><a href=<%= book.url %>><%= book.title %> </a></dt>
                                <dd><%= book.summary %> </dd>
                            <% }) %>
                        </dl>
                    </div>
                <% } else { %>
                    <p>Do you really want to delete this Author?</p>
                    <form action="" method="post">
                        <div class="form-group">
                            <input 
                                type="hidden" 
                                id="authorid" 
                                name="authorid" 
                                required="true" 
                                value=<%= author._id %> 
                            >
                        </div>
                        <button class="btn btn-primary" type="submit">Delete</button>
                    </form>
                <% } %> 
            </div>
        </div>
    </div>
</body>
</html>

<!-- 
    * At the top it displays the author details
    * It then includes a conditional statement based on the number of author_books (the if and else clauses)
        * If there are books associated with the author then the page lists the books and states that these must be deleted before this Author may be deleted
        * If there are no books then the page displays a confirmation prompt
        * If the Delete button is clicked then the author id is sent to the server in a POST request and that author's record will be deleted

    * Next we will add a Delete control to the Author detail view (the detail page is a good place from which to delete a record)
    * In a full implementation the control would be made visible only to authorized users
 -->